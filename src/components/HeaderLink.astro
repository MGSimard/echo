---
import type { HTMLAttributes } from "astro/types";

type Props = HTMLAttributes<"a">;

const { href, class: className, ...props } = Astro.props;
const pathname = Astro.url.pathname;
const normalize = (p: string) => (p.endsWith("/") && p !== "/" ? p.slice(0, -1) : p);
const hrefStr = typeof href === "string" ? href : href ? String(href) : "";
const isActive = normalize(hrefStr) === normalize(pathname);
---

<a href={href} class:list={[className, { active: isActive }]} data-astro-prefetch {...props}><slot /></a>
